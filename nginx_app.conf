index index.php index.html;

# Trata todas as requisições, tentando primeiro arquivos estáticos,
# depois redirecionando para a index.php se o arquivo não for encontrado.
location / {
    try_files $uri $uri/ /index.php?$query_string;
}

# Passa os scripts PHP para o PHP-FPM do buildpack.
# Esta é a configuração mais robusta para este ambiente, delegando
# o processamento do PHP-FPM ao buildpack.
location ~ \.php$ {
    try_files @heroku-fcgi @heroku-fcgi;
}

# Configura o cache para arquivos estáticos (CSS, JS, imagens, etc.)
location ~* \.(?:css|js|jpg|jpeg|gif|png|ico|svg)$ {
    try_files $uri =404;
    expires 7d;
    access_log off;
}